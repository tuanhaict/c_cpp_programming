# üß† C·∫•p ph√°t ƒë·ªông trong C v√† C++

Khi l√†m vi·ªác v·ªõi C/C++ ta th·∫•y m·∫£ng c√≥ k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh, do ƒë√≥ kh√¥ng th·ªÉ d√πng k√≠ch th∆∞·ªõc l·∫•y t·ª´ `input` ƒë·ªÉ l√†m k√≠ch th∆∞·ªõc m·∫£ng nh∆∞:

```cpp
int n;
scanf("%d", &n);
int arr[n];
```

ƒê·ªÉ gi·∫£i quy·∫øt ƒëi·ªÅu n√†y ng∆∞·ªùi ta th∆∞·ªùng d√πng 1 k√≠ch th∆∞·ªõc r·∫•t l·ªõn cho m·∫£ng v√† ch·ªâ l√†m vi·ªác tr√™n 1 ph·∫ßn nh·ªè `n` nh·∫≠p t·ª´ input nh∆∞:

```cpp
int arr[1e5];
int n;
cin >> n;
for (int i=0; i<n; ++i)
{
    // c√°c l·ªánh
}
```

ƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y, ch√∫ng ta c√≥ th·ªÉ d√πng c·∫•p ph√°t ƒë·ªông.

`Note`: H√†m `sizeof` d√πng ƒë·ªÉ l·∫•y k√≠ch th∆∞·ªõc (theo bytes)

V√≠ d·ª•:

```cpp
int a = 5;
printf("%d", sizeof(a)); // in ra 4
printf("%d", sizeof(int)); // in ra 4
printf("%d", sizeof(float)); // in ra 4
printf("%d", sizeof(double)); // in ra 8
int *ptr = &a;
printf("%d", sizeof(ptr)); // in ra 8 n·∫øu l√† m√°y 64-bit, 4 n·∫øu l√† m√°y 32-bit

```

## 1. C·∫•p ph√°t ƒë·ªông trong C

- D√πng th∆∞ vi·ªán: `<stdlib.h>`
  - `malloc(size)`: c·∫•p ph√°t v√πng nh·ªõ c√≥ k√≠ch th∆∞·ªõc `size` bytes
  - `free(pointer)`: gi·∫£i ph√≥ng v√πng nh·ªõ ƒë√£ c·∫•p.
- V√≠ d·ª•:

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int n;
    scanf("%d", &n);

    int *arr = (int*) malloc(n * sizeof(int));

    if (arr == NULL) {
        printf("Khong du bo nho!\n");
        return 1;
    }

    for (int i = 0; i < n; i++) arr[i] = i + 1;

    for (int i = 0; i < n; i++) printf("%d ", arr[i]);

    free(arr); // üî• ph·∫£i gi·∫£i ph√≥ng sau khi d√πng
    return 0;
}
```

## 2. C·∫•p ph√°t ƒë·ªông trong C++

- D√πng to√°n t·ª≠ `new` ƒë·ªÉ c·∫•p ph√°t b·ªô nh·ªõ.
- D√πng to√°n t·ª≠ `delete` ƒë·ªÉ gi·∫£i ph√≥ng b·ªô nh·ªõ.
- V√≠ d·ª•:

```cpp
#include <iostream>
using namespace std;

int main() {
    int n;
    cout << "Nhap n: ";
    cin >> n;

    int *a = new int[n]; // c·∫•p ph√°t ƒë·ªông m·∫£ng n ph·∫ßn t·ª≠

    for (int i = 0; i < n; i++) a[i] = i * i;
    for (int i = 0; i < n; i++) cout << a[i] << " ";

    delete[] a; // gi·∫£i ph√≥ng
}
```

`Note`: Khi c·∫•p ph√°t trong C++ v·ªõi `new`, n·∫øu kh√¥ng c·∫•p ph√°t ƒë∆∞·ª£c ch∆∞∆°ng tr√¨nh s·∫Ω t·ª± d·ª´ng, kh√¥ng c·∫ßn ki·ªÉm tra `con tr·ªè == NULL` nh∆∞ ·ªü C.
